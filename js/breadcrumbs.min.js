(function(){!function(){return function(a){var b,c,d,e;return d=c=void 0,b={maxCollapsedCrumbs:3,minWidth:44,shaderWidth:44,shaderAntumbra:25,allowVariableWidths:!1,tabWidth:150,collapsedCrumb:0,expandedCrumb:0,totalCrumbs:0,crumbWidths:[],crumbObjs:[],shaderObjs:[]},e={build:function(e,f){return d=e,c=d.find(".crumbs"),b.totalCrumbs=0,"object"==typeof f&&a.extend(b,f),c.find(".crumb").each(function(c){var d;return d=a(this),b.crumbObjs[c+1]=d,d.removeAttr("data-collapsed"),d.removeAttr("style"),d.find(".shader").length||d.append('<div class="shader"></div>'),b.shaderObjs[c+1]=d.find(".shader"),b.crumbWidths[c+1]=b.allowVariableWidths?d.outerWidth():b.tabWidth,b.totalCrumbs++})},windowResize:function(){var a,c,f,g;for(g=[],a=c=1,f=b.totalCrumbs-1;f>=c;a=c+=1)g.push(e.updateCrumb(a,d.width()));return g},updateCrumb:function(a,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(h=b.crumbWidths[a],n=b.crumbWidths[a+1],f=0,f=b.minWidth*(a-1),e=0,l=q=r=a+1,s=b.totalCrumbs;s>=q;l=q+=1)e+=b.crumbWidths[l];if(j=d-f-e,g=b.crumbObjs[a]){if(i=g.outerWidth(),m=a>b.totalCrumbs?b.crumbObjs[a+1]:null,o=b.shaderObjs[a],h>i?g.attr("data-expanded",!1):g.attr("data-expanded",!0),!(f+h+e>d))return g.outerWidth(h),o.css("right",-b.shaderWidth-b.shaderAntumbra);if(b.allowVariableWidths?g.outerWidth(j):g.outerWidth(b.minWidth),b.maxCollapsedCrumbs&&(j<b.minWidth?g.attr("data-collapsed",!0):g.attr("data-collapsed",!1),b.collapsedCrumb=c.find('.crumb[data-collapsed="false"]:first').index(),b.collapsedCrumb<0&&(b.collapsedCrumb=b.totalCrumbs-1,b.expandedCrumb=c.find('.crumb[data-collapsed="true"]:first').index()),(b.collapsedCrumb>=b.maxCollapsedCrumbs||b.expandedCrumb>=0)&&(k=-b.minWidth*(b.collapsedCrumb-b.maxCollapsedCrumbs),k>0&&(k=0),c.css("left",k))),p=-b.shaderWidth-b.shaderAntumbra+h-j,p>-b.shaderWidth&&(p=-b.shaderWidth),o.css("right",p),m&&n>m.outerWidth())return g.outerWidth(b.minWidth)}},init:function(b){return e.build(this,b),e.windowResize(),a(window).resize(function(){return e.windowResize()}),console.log("init")},refresh:function(a){return e.build(this,a),e.windowResize()}},a.fn.infowrapBreadcrumbs=function(b){return e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?a.error("Method "+b+" does not exist"):e.init.apply(this,arguments)}}}()(jQuery)}).call(this);